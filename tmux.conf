# .tmux.conf [Saulo G. Felix]

# bind rename window
bind A command-prompt "rename-window %%"

# bind paste buffer
bind P paste-buffer

# begin selection
bind-key -T copy-mode-vi v send-keys -X begin-selection

# bind y to copy
bind-key -T copy-mode-vi y send-keys -X copy-selection

# set clipboard on
set -g set-clipboard on
unbind-key escape

# kill window fast
bind-key w confirm kill-window
bind -n C-s confirm kill-server

# Use vim keybindings in copy mode
setw -g mode-keys vi

# change next/previous-window
bind-key . next-window
bind-key , previous-window

# index starting in 1
set -g base-index 1
set escape-time 10000

# automatically set window title
set-window-option -g automatic-rename on
set-option -g set-titles on

# automatically renumber window numbers on closing a pane
set-option -g renumber-windows on

# vim keybinds
set -g mode-keys vi
set -g remain-on-exit on

# remap prefix from 'C-b' to 'C-Space'
set-option -g prefix2 C-Space
bind-key C-Space send-prefix -2

# intuitive window-splitting keys.
bind-key | split-window -h -c '#{pane_current_path}'
bind-key - split-window -v -c '#{pane_current_path}'

# fast toggle between current and last-used window
bind-key ^space last-window

# reload config file
bind r source-file ~/.tmux.conf \; display \
".tmux.conf file was successfully reloaded"

# switch panes using Alt-arrows
bind -n M-Left select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up select-pane -U
bind -n M-Down select-pane -D

# switch panes using Vi-keys
bind-key h select-pane -L
bind-key l select-pane -R
bind-key j select-pane -D
bind-key k select-pane -U

# resize panes using Alt-arrows
bind -n S-Left resize-pane -L 1
bind -n S-Right resize-pane -R 1
bind -n S-Up resize-pane -U 1
bind -n S-Down resize-pane -D 1

# enable mouse mode
set -g mouse on

# show bells in window tittles
set-option -g window-status-bell-style fg=yellow,bold,underscore

# open new/split panes with the path of the current pane
unbind-key c
unbind-key %
unbind-key '"'

bind-key '"' split-window -v -c '#{pane_current_path}'
bind-key c new-window -c '#{pane_current_path}'
bind-key % split-window -h -c '#{pane_current_path}'

# reload tmux conf
bind-key r source-file ~/.tmux.conf

# search back to last prompt (mnemonic: "[b]ack").
bind-key b copy-mode\; send-keys -X start-of-line\; \
send-keys -X search-backward "‚ùØ"\; send-keys -X next-word

bind-key -T copy-mode-vi / command-prompt -i -p \
"search down" "send -X search-forward-incremental \"%%%\""
bind-key -T copy-mode-vi ? command-prompt -i -p \
"search up" "send -X search-backward-incremental \"%%%\""

# analagous with naked C-l which resets/clears the terminal.
bind-key C-l clear-history
set-option -g history-limit 4096
set-option -w -g main-pane-width 85

# use a to toggle synchronize panes
bind a set-window-option synchronize-panes

# windows start at 1 instead of 0
set -g base-index 1

# show activity
set -g monitor-activity off
set -g visual-activity off
set -g terminal-overrides 'xterm*:smcup@:rmcup@'
set -g default-terminal screen-256color
set -g focus-events on

# list of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-copycat'
set -g @plugin 'tmux-plugins/tmux-prefix-highlight'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'thewtex/tmux-mem-cpu-load'

# length of tmux status line
set -g status-left-length 50
set -g status-right-length 150

set-window-option -g window-status-current-format \
'#[bg=colour16,fg=colour247,bold]#I\
#[bg=colour16,fg=colour247]:#[fg=colour247,bold]#W#[fg=dim] '

set -g default-terminal "tmux-256color"

set-option -g status-justify right
set-option -g status-bg colour16
set-option -g status-fg colour241
set-option -g status-interval 1

set -g status-left '#[fg=colour241,bg=colour16] #S\
#[fg=colour241,bold,bg=colour16] #W\
#[fg=colour16] #{prefix_highlight}\
#[fg=colour241, bold]#(whoami) \
'
set -g status-right '#[fg=colour241,bg=colour16] \
#($TMUX_PLUGIN_MANAGER_PATH/tmux-mem-cpu-load/tmux-mem-cpu-load -a 0 --interval 1)\
#[fg=colour16]#[fg=colour241,bold] %d %h %Y\
#[bg=colour16,fg=colour241,bold] %l:%M%p #[default]'

# put useful info in the status bar
set-option -g set-titles on

# window number,program name, active(or not)
set-option -g set-titles-string '#H:#S.#I.#P #W #T'

# border colours
set -g pane-border-style fg=colour66
set -g pane-active-border-style "bg=default fg=colour66"

# hide/show pane
bind-key ! break-pane -d -n [hidden-pane]
bind-key @ join-pane -s $.0

# restore tmux sessions with ressurect automatically
set -g @resurrect-strategy-vim  'session'
set -g @resurrect-strategy-nvim 'session'
set -g @resurrect-processes 'vimx ranger htop top'
set -g @resurrect-capture-pane-contents 'off'

# initialize TMUX plugin manager
run -b '~/.tmux/plugins/tpm/tpm'
